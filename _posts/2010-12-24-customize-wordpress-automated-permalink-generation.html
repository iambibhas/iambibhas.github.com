--- 
layout: post
type: post
status: publish
tags: 
- auto
- permalink
- php
- slug
- Technical
- wordpress
meta: 
  _wpbitly: http://q.bibhas.in/H1BS99
  image: ""
  _edit_last: "1"
published: true
title: Customize Wordpress' Automated Permalink Generation
---
If you use Wordpress for managing your blog or CMS, then you know how it automatically generate the permalink of a post when you just provide the title of the post. It takes the Title, removes special characters or replaces them with a hyphen(-).

Now, I was working on a project which required a news submission to Google news, for which I needed to fix an arbitrary 3 or more digit number to the permalink(Google requirement). So one way of doing that was to manually edit it each time i wrote a post. But that aint possible considering the frequency of posting. So I had to automate the process. <!--more-->So I looked around a bit, had <a class="aptureEnhance" href="http://stackoverflow.com/questions/4518527/customize-the-auto-generation-of-post-slug-in-wordpress/" target="_blank">a healthy conversation in StackOverflow</a> but it didn't work well. So, when I was wandering around the <a class="aptureEnhance" href="http://phpxref.ftwr.co.uk/wordpress/nav.html?wp-admin/includes/post.php.html" target="_blank">post.php</a> file, I noticed a function named <em>wp_unique_post_slug()</em> which seemed like the solution I needed! That function generates the slug of the post when the post title is passed to it.

Here is the total function -
<pre class="brush: php">function wp_unique_post_slug( $slug, $post_ID, $post_status, $post_type, $post_parent ) {
	// A Whole Lot of Stuff is done here.. But what we really need is the final line ..
        // ....
        return $slug;
}</pre>
So, Just before the generated slug is returned from the function, I made the necessary changes. Like -
<pre class="brush: php">if($slug!=""){
  $random=rand(11111,99999); //I needed 5 digit random
  $slug .= "-" . $random;
}
return $slug;</pre>
And Tada! My Job Done. So now if I give a post title like "<strong>Hello World</strong>", for a default Wordpress installation, the permalink generated would be - <strong>http://bibhas.in/blog/2010/12/hello-world/</strong> but with my customization, I'd get a permalink like <strong>http://bibhas.in/blog/2010/12/hello-world-34523/</strong> .. Where the number <strong>34523</strong> is a random number generated by my added code. :)

So this way, you can make changes in your slug any way you want. But be careful when you edit the file. One mistake can literally Hang your blog. :P
