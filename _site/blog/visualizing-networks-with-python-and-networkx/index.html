<!DOCTYPE html>
<html xmlns="//www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta charset="utf-8">
  <title>
    
      Visualizing Networks with Python and Networkx &ndash;
    
    Bibhas Debnath
  </title>

  <meta name="author" content="Bibhas Debnath" />
  <meta name="description" content="Bibhas Debnath, developer from Kolkata, India." />

  <link rel="alternate" type="application/rss+xml" href="/atom.xml" />

  <link rel="stylesheet" href="/css/base.css" type="text/css" media="screen, projection" />
  <link media="only screen and (max-device-width: 480px)" href="/css/iphone.css" type="text/css" rel="stylesheet" />
  <link media="only screen and (device-width: 768px)" href="/css/iphone.css" type="text/css" rel="stylesheet" />
  <link href='//fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/app.css" type="text/css" media="screen, projection" />

  <script type="text/javascript" src="/js/jquery.min.js"></script>

  
  <link rel="stylesheet" href="/css/pygments.css" type="text/css" />
  <link rel="stylesheet" href="/css/shCore.css" type="text/css" media="screen, projection" />
  <script type="text/javascript" src="/js/shCore.js"></script>
  <script type="text/javascript" src="/js/shBrushPlain.js"></script>
  <script type="text/javascript" src="/js/shBrushJScript.js"></script>
  

  

  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
  <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
  <script type="text/javascript" src="/js/application.js"></script>
</head>

<body>
  <section class="sidebar" align="right">
    <a href="/">
      <img src="https://www.gravatar.com/avatar/ffbd494728961d8baf2c7404dc420152?s=150" height="75" width="75" class="avatar" />
    </a>

    <section class="name">
      <a href="/">
        <span id="fname">Bibhas</span><br>
        <span id="lname">Debnath</span>
      </a>
    </section>

    <section class="meta">
      <a href="https://github.com/iambibhas" target="_blank"><img src="/images/github.png" /></a>
      <a href="https://twitter.com/bibhasdn" target="_blank"><img src="/images/twitter.png"></a>
      <a href="/atom.xml"><img src="/images/rss.png" /></a>
    </section>

    <section class="sections">
      <ul>
        <li><a href="/about-me/">about</a></li>
        <li><a href="/blog/">posts</a></li>
        <li><a href="/crypt/">Generate Hashes</a></li>
        <li><a href="/search/all/">Moderated Search</a></li>
      </ul>
    </section>
    <section class="sections">
        <a href="https://twitter.com/bibhasdn" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @bibhasdn</a>
    </section>
    <section class="sections">
        <a href="//stackexchange.com/users/94480/bibhas">
            <img src="//stackexchange.com/users/flair/94480.png" width="208" height="58" alt="profile for Bibhas on Stack Exchange, a network of free, community-driven Q&amp;A sites" title="profile for Bibhas on Stack Exchange, a network of free, community-driven Q&amp;A sites" />
        </a>
    </section>
    <section id="gittip">

    </section>
  </section>

  <section class="content">
  <h1>
    <a href="/blog/visualizing-networks-with-python-and-networkx/">Visualizing Networks with Python and Networkx</a>
  </h1>

  <section class="byline">
    December  7, 2014
  </section>

  <p>Few days back I had an assignment to visualize a network of people who talk to each other. I needed to find the people who are contacted most. Drawing a network graph seemed like the best way to find it out visually.</p>

<p>So I looked around for tools that could help with it and came across <a href="https://networkx.github.io/">Networkx</a>. They have a nice <a href="https://networkx.github.io/documentation/latest/overview.html">documentation</a> and a <a href="https://networkx.github.io/documentation/latest/examples/">Lot of examples</a> on drawing different kinds of graphs. I decided to try it out. Here&rsquo;s how to draw a simple undirected graph with it -</p>

<pre><code>import networkx as nx
import matplotlib.pyplot as plt

def draw_graph(graph):
    # create networkx graph
    G=nx.Graph()

    # add edges
    for edge in graph:
        G.add_edge(edge[0], edge[1])

    # There are graph layouts like shell, spring, spectral and random.
    # Shell layout usually looks better, so we're choosing it.
    # I will show some examples later of other layouts
    graph_pos = nx.shell_layout(G)

    # draw nodes, edges and labels
    nx.draw_networkx_nodes(G, graph_pos, node_size=1000, node_color='blue', alpha=0.3)
    nx.draw_networkx_edges(G, graph_pos)
    nx.draw_networkx_labels(G, graph_pos, font_size=12, font_family='sans-serif')

    # show graph
    plt.show()

# draw example
# graph is a list of tuples of nodes. Each tuple defining the
# connection between 2 nodes
graph = [(20, 21), (21, 22), (22, 23), (23, 24), (24, 25), (25, 20)]

draw_graph(graph)
</code></pre>

<p>And this is the image that&rsquo;s produced -</p>

<p><img src="https://i.imgur.com/RBTArHs.png" alt="" /></p>

<p>We can try adding some more edges and see how it looks. E.g. -</p>

<pre><code>graph = [
    (20, 21), (21, 22), (22, 23), (23, 24), (24, 25), (25, 20),
    (25, 21), (23, 20), (24, 22)
]
</code></pre>

<p>This generates -</p>

<p><img src="https://i.imgur.com/Xqrlmlh.png" alt="" /></p>

<p>Neat!</p>

<h2>Directed Graph</h2>

<p>But the above graph is undirected. I needed directed to know which node is receiving more connections from others. Then I found out that Networkx has a Graph class called DiGraph, which can be used to draw directed graphs. Let&rsquo;s try that -</p>

<pre><code>def draw_graph(graph):
    # create directed networkx graph
    G=nx.DiGraph()

    # add edges
    G.add_edges_from(graph)

    graph_pos = nx.shell_layout(G)

    # draw nodes, edges and labels
    nx.draw_networkx_nodes(G, graph_pos, node_size=1000, node_color='blue', alpha=0.3)
    # we can now added edge thickness and edge color
    nx.draw_networkx_edges(G, graph_pos, width=2, alpha=0.3, edge_color='green')
    nx.draw_networkx_labels(G, graph_pos, font_size=12, font_family='sans-serif')

    # show graph
    plt.show()

# we can add more edges here as the direction is a factor now,
# edges are added as (from_node, to_node) tuples
# hence (22, 25) and (25, 22) are different. In undirected graph,
# we couldn't have told the difference.
graph = graph = [
        (20, 21), (21, 22), (22, 23), (23, 24), (24, 25), (25, 20),
        (25, 21), (23, 20), (24, 22), (21, 24), (20, 21)
    ]
draw_graph(graph)
</code></pre>

<p>This generates -</p>

<p><img src="https://i.imgur.com/w74fl2J.png" alt="" /></p>

<p>That works great! But we&rsquo;re still missing one thing, a label for the edge.</p>

<pre><code>labels = range(len(graph))
# [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

edge_labels = dict(zip(graph, labels))
# {(23, 20): 7, (22, 23): 2, (20, 21): 10, (24, 25): 4, (21, 22): 1, (25, 20): 5, (24, 22): 8, (25, 21): 6, (23, 24): 3, (21, 24): 9}

nx.draw_networkx_edge_labels(G, graph_pos, edge_labels=edge_labels)

# show graph
plt.show()
</code></pre>

<p>Which generates -</p>

<p><img src="https://i.imgur.com/k2KZvnz.png" alt="" /></p>

<p>You can follow the same data structure and add any label you want to the edges.</p>

<h3>Layouts</h3>

<p>Now let&rsquo;s try out the other layouts we mentioned -</p>

<h4>Spring layout</h4>

<pre><code>graph_pos = nx.spring_layout(G)
</code></pre>

<p><img src="https://i.imgur.com/LqgtZWH.png" alt="" /></p>

<h4>Spectral layout</h4>

<pre><code>graph_pos = nx.spectral_layout(G)
</code></pre>

<p><img src="https://i.imgur.com/zr00Gad.png" alt="" /></p>

<h4>Random layout</h4>

<pre><code>graph_pos = nx.random_layout(G)
</code></pre>

<p><img src="https://i.imgur.com/CVdNbH7.png" alt="" /></p>

<p>Overall, I am liking Networkx. There are many more types of graphs that can be drawn. Can&rsquo;t wait to try them.</p>


  <!-- TODO: bio here -->
  <section class="meta">
    <h3>Discussion, links, and tweets</h3>
    <section class="copy">
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="bibhasdn">Tweet</a>
      <div class="g-plusone" data-size="tall" data-annotation="none"></div>
    </section>
    <section style="padding-right: 20px; margin-top: 10px">
        
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'bee-mblog'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

        
    </section>
  </section>
</section>



    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-3724476-6']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : '//www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    <script type="text/javascript">
        if(SyntaxHighlighter !== undefined){
            SyntaxHighlighter.all();
        }
    </script>

</body>

</html>
