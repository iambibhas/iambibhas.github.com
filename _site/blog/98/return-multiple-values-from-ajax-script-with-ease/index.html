<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta charset="utf-8">
  <title>
    
      Return Multiple Values from AJAX script with ease &ndash;
    
    Bibhas C Debnath
  </title>

  <meta name="author" content="Bibhas C Debnath" />
  <meta name="description" content="Lazy to the core" />

  <link rel="alternate" type="application/rss+xml" href="/atom.xml" />

  <link rel="stylesheet" href="/css/base.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="/css/pygments.css" type="text/css" />
  <link media="only screen and (max-device-width: 480px)" href="/css/iphone.css" type="text/css" rel="stylesheet" />
  <link media="only screen and (device-width: 768px)" href="/css/iphone.css" type="text/css" rel="stylesheet" />
  <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/shCore.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="/css/app.css" type="text/css" media="screen, projection" />

  <script type="text/javascript" src="/js/jquery.min.js"></script>

  
  <script type="text/javascript" src="/js/shCore.js"></script>
  <script type="text/javascript" src="/js/shBrushPlain.js"></script>
  <script type="text/javascript" src="/js/shBrushJScript.js"></script>
  

  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
  <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
  <script type="text/javascript" src="/js/application.js"></script>
</head>

<body>
  <section class="sidebar" align="right">
    <a href="/">
      <img src="http://www.gravatar.com/avatar/ffbd494728961d8baf2c7404dc420152?s=150" height="75" width="75" class="avatar" />
    </a>

    <section class="name">
      <a href="/">
        <span id="fname">Bibhas</span><br>
        <span id="lname">Debnath</span>
      </a>
    </section>

    <section class="meta">
      <a href="https://github.com/iambibhas" target="_blank"><img src="/images/github.png" /></a>
      <a href="https://twitter.com/iAmBibhas" target="_blank"><img src="/images/twitter.png"></a>
      <a href="/atom.xml"><img src="/images/rss.png" /></a>
    </section>

    <section class="sections">
      <ul>
        <li><a href="/about-me/">about</a></li>
        <li><a href="/blog/">posts</a></li>
        <li><a href="/search/all/">Moderated Search</a></li>
      </ul>
    </section>
    <section class="sections">
        <a href="https://twitter.com/iAmBibhas" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @iAmBibhas</a>
    </section>
    <section class="sections">
        <a href="http://stackexchange.com/users/94480/bibhas">
            <img src="http://stackexchange.com/users/flair/94480.png" width="208" height="58" alt="profile for Bibhas on Stack Exchange, a network of free, community-driven Q&amp;A sites" title="profile for Bibhas on Stack Exchange, a network of free, community-driven Q&amp;A sites" />
        </a>
    </section>
    <section id="gittip">
        <p>
            <a href="https://www.gittip.com/on/github/iambibhas">
            <img src="https://464cb7500b7b22c45962-7e649de06c64f44fd9a5706b67a55744.ssl.cf2.rackcdn.com//img/gittip_icon.png" alt="gittip">
            Fund me on Gittip!</a>
        </p>
    </section>
  </section>

  <section class="content">
  <h1>
    <a href="/blog/98/return-multiple-values-from-ajax-script-with-ease/">Return Multiple Values from AJAX script with ease</a>
  </h1>

  <section class="byline">
    September 25, 2010
  </section>

  <blockquote>
<p style="text-align: center;"><em><strong>Disclaimer</strong> </em></p>
<p style="text-align: center;"><em>This post is <strong>not</strong> for Expert users. Only the novice guys who are interested in these stuff, might have a look.</em></p>
</blockquote>
<!--more-->While working on an AJAX implemented script, we sometimes need to return a lot of data from the server side script. If you've worked with AJAX, you'll know that the script returns the value as <em>httpObject.responseText</em>. And the value of <em>responseText</em> is what you echo from your script. Now that makes our scope limited.

Assuming that We have a javascript file <em>testAjaxJs.js</em> and <em>testAjaxPhp.php</em> ..

If you try to make a lot of echo inside the php script, all of them are gonna get appended one behind another and appear like, for an example, this - <em>BibhasChandraDebnath</em>.

Now, you may have an idea of echoing a special character like <strong>'-'</strong> or<strong> '_' </strong>after each echo so that you can then split the whole text inside the JS file using the split function and form an array.

That might be an idea, but there is a better way. Why not just use JSON to return data as array? Well, PHP can pretty much deal with JSON and it is a native thing to Javascript. So, it becomes easier. :)

Do this, initialize an array inside the php script, and whenever you have a data ready to be returned, insert it into the array.

So at the end of the script, you'll have an array like this -
<pre class="brush: php">Array
(
    [first_name] =&gt; Bibhas
    [middle_name] =&gt; Chandra
    [last_name] =&gt; Debnath
)</pre>
Now,we're gonna encode this data as JSON object. For that,
<pre class="brush: php">$json_name=json_encode($array_name);</pre>
Now your array will look like -
<pre class="brush: php">{"first_name":"Bibhas","middle_name":"Chandra","last_name":"Debnath"}</pre>
As this is a string to PHP, you can easily echo it. Now lets go to the Javascript part to read this JSON string we just sent to it.

Initialize a variable to store the returned string in it -
<pre class="brush: js">var jsonText = httpObject.responseText</pre>
Now we need to transform this JSONText to a JSON Object. For that, we can use the eval() function. Like-
<pre class="brush: js">var jsonObject= eval('('+jsonText+')');</pre>
or
<pre class="brush: js">eval('jsonObject='+jsonText);</pre>
both works the same in this case.
So now that we have a JSON Object, lets get those data.
<pre class="brush: js">var firstName=jsonObject.first_name;
var middleName=jsonObject.middle_name;
var lastName=jsonObject.last_name;</pre>
And that's it, you've got your data back. :)


  <!-- TODO: bio here -->
  <section class="meta">
    <h3>Discussion, links, and tweets</h3>
    <section class="copy">
      <a href="https://twitter.com/iAmBibhas" target="_blank">
        <img src="http://www.gravatar.com/avatar/ffbd494728961d8baf2c7404dc420152?s=142" height="50" width="50" />
      </a>

      <p>
        I'm a Ninja/Kickass/Rockstar Developer, NOT. <a href="https://twitter.com/iAmBibhas" target="_blank">Follow me on Twitter</a>;
      </p>

      <a href="https://twitter.com/share" class="twitter-share-button" data-via="iAmBibhas">Tweet</a>
      <div class="g-plusone" data-size="tall" data-annotation="none"></div>
    </section>
    <section style="padding-right: 20px; margin-top: 10px">
        
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'bee-mblog'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

        
    </section>
  </section>
</section>


    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-3724476-6']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>

<script type="text/javascript">
     SyntaxHighlighter.all()
</script>
</body>

</html>
